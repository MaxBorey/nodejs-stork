tags: [Users]
summary: Update current user profile
operationId: updateUsersMe
description: >
  Updates the authenticated user's profile.
  Use `multipart/form-data` when uploading an avatar in field `photoURL`.
security:
  - bearerAuth: []

parameters:
  - name: userId
    in: path
    required: true
    description: The ID of the user to update.
    schema:
      type: string
      pattern: '^[0-9a-fA-F]{24}$'

requestBody:
  required: true
  content:
    multipart/form-data:
      schema:
        type: object
        additionalProperties: false
        minProperties: 1 # ← достатньо одного поля
        properties:
          name:
            type: string
            example: Jane Doe
          email:
            type: string
            format: email
            example: jane@example.com
          gender:
            type: string
            enum: [boy, girl, 'null']
            example: 'null'
          dueDate:
            type: string
            format: date
            description: Accepts YYYY-MM-DD, DD.MM.YYYY or DD-MM-YYYY.
            example: '2025-12-31'
          photoURL:
            type: string
            format: binary
      encoding:
        photoURL:
          contentType: image/jpeg, image/png
    application/json:
      schema:
        type: object
        additionalProperties: false
        minProperties: 1 # ← достатньо одного поля
        properties:
          name:
            type: string
          email:
            type: string
            format: email
          gender:
            type: string
            enum: [boy, girl, 'null']
          dueDate:
            type: string
            format: date
            description: Accepts YYYY-MM-DD, DD.MM.YYYY or DD-MM-YYYY.

responses:
  '200':
    description: User profile updated successfully
    content:
      application/json:
        schema:
          type: object
          required: [status, message, data]
          properties:
            status:
              type: integer
              example: 200
            message:
              type: string
              example: User profile updated successfully!
            data:
              type: object
              additionalProperties: false
              required: [_id, name, email, gender, createdAt, updatedAt]
              properties:
                _id:
                  type: string
                  example: 60c72b2f9b1d9c001f5c8a2b
                name:
                  type: string
                  example: Jane Doe
                email:
                  type: string
                  format: email
                  example: jane@example.com
                gender:
                  type: string
                  enum: [boy, girl, 'null']
                  example: 'null'
                dueDate:
                  type: [string, 'null']
                  format: date
                  example: '2025-12-31'
                photoURL:
                  type: [string, 'null']
                  example: 'https://res.cloudinary.com/demo/image/upload/v12345/photo.jpg'
                createdAt:
                  type: string
                  format: date-time
                updatedAt:
                  type: string
                  format: date-time
  '401':
    $ref: ../../../../../components/responses/401.yaml
  '404':
    $ref: ../../../../../components/responses/404.yaml
  '400':
    $ref: ../../../../../components/responses/400.yaml
  '422':
    $ref: ../../../../../components/responses/422.yaml
